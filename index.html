<!DOCTYPE html>
<html>
<head>
<style type="text/css">
		#second circle {
		stroke: black;
		/*r: 12;*/
		stroke-width :1.5px ;
	}
</style>
</head>
<body onmousedown="start()" touch = "start">
<svg id="first" width="250" height="500" display="block" >
	<polyline points="17.5,20 175,20 175,300 20,300 20,20" style="fill:none ; stroke:red ; stroke-width:5px " />
	<text x="30" y="50" style="fill:black ; font-size:20px ; font-weight:bold ; font-style:italic">
		<tspan x="40" y="70">Pop the Color</tspan>
		<tspan x="30" y="90">that apears most</tspan>
		<tspan style="font-size:12px " x="63" y="120">(click to start)</tspan>
	</text>
	<circle cx="80" cy="190" r="15" fill="red" stroke="blue" stroke-width="3px" />
	<circle cx="115" cy="190" r="15" fill="blue" stroke="black" stroke-width="3px" />
	<circle cx="80" cy="225" r="15" fill="yellow" stroke="red" stroke-width="3px" />
	<circle cx="115" cy="225" r="15" fill="green" stroke="purple" stroke-width="3px" />
</svg>
<svg id="second" width="250" height="500" display="none" >
	<polyline points="17.5,20 175,20 175,300 20,300 20,20" style="fill:none ; stroke:red ; stroke-width:5px " />
	<text id= "correct" x="75" y="15" display="none" style="font-size:18px ; fill:DarkMagenta " > correct
	</text>
	<text id="wrong" x="75" y="15" display="none" style="font-size:18px ; fill:DarkMagenta  "> wrong
	</text>
</svg>
<script type="text/javascript">
 var color_count = [0,0,0,0]
 var intro_svg, main_svg
 var counter
 var max =-1, max_color=-1 , max_color2 = -1 , tr=2
 var color = ["red" , "blue" , "green" , "yellow"]
 function start() {
	intro_svg = document.getElementById("first")
	main_svg = document.getElementById("second")
  	if (intro_svg.getAttribute("display") == "block") {
 		intro_svg.setAttribute("display" , "none")
 		main_svg.setAttribute("display" , "block")
 		// start2()
 		color_count = [0,0,0,0]
	 	max_color = -1
	 	max_color2 = -1
	 	max = -1
	 	for (var j = 1; j <= 7; j++) {
	 			for (var i = 1; i <= 4; i++) {
	 				var color_number = Math.floor(Math.random()*4)
	 				counter = (j-1)*4 + i
	 				circle = document.createElementNS('http://www.w3.org/2000/svg', "circle")
	   				circle.setAttribute("cx" ,43+(36*(i-1)))
	 				circle.setAttribute("cy" ,50+(36*(j-1)))
	 				circle.setAttribute("r" , 2)
	 				circle.setAttribute("fill" , color[color_number])
	 				// circle.setAttribute("stroke" , "black")
	 				// circle.setAttribute("stroke-width" , "0px")
	 				circle.setAttribute("onmousedown" , "result(this)")
	 				circle.setAttribute("touch" , "result(this)")
	 				// circle.setAttribute("id" , counter)
 					circle.setAttribute("class" , color[color_number])
	  				main_svg.appendChild(circle)
	  				color_count[color_number] ++

	   	  			};
	 			
	  		};
	  		timer()
	  		// change = document.getElementsByClassName("yellow")
  		for (var i = 0; i <= 3; i++) {
 		if (max <= color_count[i]) {
 			max = color_count[i]
 			max_color = i
 		};
 		
 		};
 		for (var i = 0; i <= 3; i++) {
 			if ((max == color_count[i]) && (max_color != i)) {
 				max_color2 = i
 			};
 		};
 		// alert(12)
 	}
  }

     	 	
 
 function start2() {
 	// color_count = [0,0,0,0]
	change = document.getElementsByClassName(color[max_color])
	// change2 = document.getElementsByClassName(color[max_color2])
	// console.log("start2: ",color_count[max_color] , max)
	color_count[max_color] =  color_count[max_color] - max
	// color_count[max_color2] =  color_count[max_color2] - max
 	for (var j = max-1; j >= 0; j--) {
 			var color_number = Math.floor(Math.random()*4)
 			// console.log(r)
 			// console.log()
 			change[j].setAttribute("fill" , color[color_number])
 			change[j].setAttribute("r" , 2)
 			change[j].setAttribute("class" , color[color_number])
 			// change2[j].setAttribute("fill" , color[color_number])
 			color_count[color_number] ++
 			
  		};
  	max_color = -1
 	max_color2 = -1
 	max = -1
 	// timer()
  	for (var i = 0; i <= 3; i++) {
 		if (max <= color_count[i]) {
 			max = color_count[i]
 			max_color = i
 		};
 		
 	};
 	for (var i = 0; i <= 3; i++) {
 			if ((max == color_count[i]) && (max_color != i)) {
 				max_color2 = i
 			};
 		};
 }
 function timer() {
  	circles = document.getElementsByTagName("circle")
  	for (var i = circles.length - 1; i >= 4; i--) {

  		// circles[i].setAttribute("r" , tr)
  		if (circles[i].getAttribute("r") < 15) {
  			circles[i].setAttribute( "r" , Number(circles[i].getAttribute("r")) + 0.1 )
  		};

  	};
 	
		setTimeout('timer()' , 10)
 	
}
// function timer2() {
// 	// alert(5)
// 	circles = document.getElementsByTagName("circle")
// 	for (var i = circles.length - 1; i >= 4; i--) {
		// if (13 < circles[i].getAttribute("r") < 14) {
			// circles[i].setAttribute( "stroke-width" , (Number(circles[i].getAttribute("stroke-width") - "px") + 0.5) + "px" )
		// }
		// console.log(Number(circles[i].getAttribute("stroke-width")))

		
// 	}
// 	setTimeout('timer2()' , 1)
// }
 function result(circle) {	
 	if ((circle.getAttribute("fill") == color[max_color]) || (circle.getAttribute("fill") == color[max_color2])) {
 		document.getElementById("wrong").setAttribute("display" , "none")
 		document.getElementById("correct").setAttribute("display" , "block")

 		start2()
 		tr = 5
 		// timer()
 		
 	}
 	else {
 		// alert("Try again")
 		document.getElementById("wrong").setAttribute("display" , "block")
 		document.getElementById("correct").setAttribute("display" , "none")


 	}
 	
 }
 	

</script>
</body>
</html>